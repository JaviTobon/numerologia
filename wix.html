<link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/starter-template/">
<!-- Bootstrap core CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- ESTILOS - CLASES GENERADAS ASÍ COMO LAS USADAS DE BOOTSRAP -->
<style>
    .numerologyContent {
        width: 100%;
    }

    .headerTitleDiv {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .headerTitleDiv2 {
        font-family: 'Courier New', monospace, sans-serif;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .headerLogo {
        float: right;
        width: 100px;
    }

    .errorMessage {
        color: #E3061E;
        font-family: 'Courier New', monospace, sans-serif;
    }

    .inputError {
        border-color: #E3061E !important;
        font-weight: bold;
    }

    .formInput {
        display: block;
        width: 100%;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #212529;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        border-radius: none;
        transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    .formSelect {
        display: block;
        width: 100%;
        padding: 0.375rem 2.25rem 0.375rem 0.75rem;
        -moz-padding-start: calc(0.75rem - 3px);
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #212529;
        background-color: #fff;
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 16px 12px;
        border: 1px solid #ced4da;
        border-radius: none;
        transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }

    .birthDate {
        color: #A18737;
        font-weight: bold;
    }

    .letterTitle {
        font-family: 'Courier New', monospace, sans-serif;
        font-size: 16pt;
        font-weight: bold;
        color: #A18737;
        text-align: center;
        vertical-align: middle;
    }

    .letterSubTitle {
        font-family: 'Courier New', monospace, sans-serif;
        font-size: 14pt;
        font-weight: bold;
        color: #000000;
    }

    .tableTextRegular {
        font-family: 'Courier New', monospace, sans-serif;
        font-size: 10pt;
        color: blue;
        font-weight: bold;
    }

    .tableTextBold {
        font-family: 'Courier New', monospace, sans-serif;
        font-size: 10pt;
        color: #000000;
        font-weight: bold;
    }

    .tableTextSize {
        font-family: 'Courier New', monospace, sans-serif;
        font-size: 11pt;
    }

    .tableTitles {
        font-weight: bold;
        text-align: middle;
        vertical-align: middle;
    }

    .tableTitles2 {
        text-align: left;
        vertical-align: middle;
    }

    .blackTextR {
        color: #000000;
        font-weight: bold;
    }

    .blackText {
        color: #000000;
        font-weight: bold;
    }

    .goldText {
        color: #A18737;
        font-weight: bold;
    }

    .redText {
        color: #E3061E !important;
        ;
        font-weight: bold;
    }

    .greenText {
        color: green;
        font-weight: bold;
    }

    .soulText {
        vertical-align: bottom !important;
    }

    .personalityText {
        vertical-align: top;
    }

    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }

    .tableName {
        border-color: transparent !important;
    }

    .tableName td {
        padding: .1rem .3rem .1rem 0 !important;
    }

    #name-number-table,
    #active-name-number-table {
        border-top: 1px solid #DADADA;
        border-bottom: 1px solid #DADADA;
        padding-top: 15px;
        display: block;
        width: 100%;
        overflow-x: auto;
        white-space: nowrap;
    }

    thead {
        background-color: #DADADA;
    }

    .thPpal {
        background-color: #F6F6F6 !important;
    }

    .table>:not(caption)>*>* {
        border-top-width: 1px;
        border-left-width: 1px;
        border-right-width: 1px;
        box-shadow: none !important;
    }

    th {
        text-align: center;
    }

    td {
        text-align: center;
    }

    .zeroValue {
        color: #E3061E !important;
        font-weight: bold;
    }

    td.currentYear {
        color: #A18737 !important;
        font-weight: bold;
    }

    span.sameDigit {
        color: #8FB624 !important;
        font-weight: bold;
        /*text-decoration: underline;*/
    }

    .td-w {
        text-align: center;
    }

    /*.td-b {text-align: center;color: #435ba6;}*/

    div#cyclesLife-table table tr {
        height: 53px;
        text-align: center;
        vertical-align: middle;
    }

    div#cyclesLife-table table td {
        color: blue;
        font-weight: bold;
    }

    div#house-table table td {
        color: blue;
        font-weight: bold;
    }

    div#active-house-table table td {
        color: blue;
        font-weight: bold;
    }

    div#pinnacles-pitfalls-table table td {
        color: blue;
        font-weight: bold;
    }

    div#family-heritage-table table td {
        color: blue;
        font-weight: bold;
    }

    #currentAge {
        position: relative;
        top: -15px;
        left: -15px;
        font-size: 0.8em;
        color: #9D9D9C;
    }

    .spaceTitle {
        margin: auto;
        margin-top: 5px;
        margin-bottom: 5px;
    }

    .spaceTop {
        margin-top: 30px;
    }

    .spaceBotFecha {
        margin-bottom: 20px;
    }

    .spaceTopCosmicMission {
        margin-top: 10px;
    }

    .spaceBotCosmicMission {
        margin-bottom: 5px;
    }

    .spaceTopNombreCompleto {
        margin-top: 10px;
    }

    .spaceBotNombreCompleto {
        margin-bottom: 10px;
    }

    .spaceBotTablaNombreCompleto {
        margin-bottom: 20px;
    }

    .spaceBotNombreActivo {
        margin-bottom: 10px;
    }

    .spaceBotTablaNombreActivo {
        margin-bottom: 30px;
    }

    .spaceTopPinaculos {
        margin-top: 40px;
    }

    .spaceBotPinaculos {
        margin-bottom: 10px;
    }

    .spaceBot2 {
        margin-bottom: -6px;
    }

    .spaceBot3 {
        margin-bottom: 20px;
    }

    .buttonContent {
        text-align: center;
    }

    button#calculate {
        background: #89633B;
        color: #ffffff;
        display: inline-block;
        line-height: 1.5;
        text-align: center;
        text-decoration: none;
        vertical-align: middle;
        cursor: pointer;
        user-select: none;
        border: 1px solid transparent;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        border-radius: none;
        transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    .tableTextAlignB {
        vertical-align: bottom
    }

    .tableTextAlignT {
        vertical-align: top
    }

    #resultados_ocultos {
        display: none;
        font-weight: 500;
    }

    .footerT {
        color: #000 !important;
    }

    .footerT a {
        color: #000 !important;
        text-decoration: none !important;
        letter-spacing: -0.3px !important;
    }

    .fecha-calculo {
        font-family: 'Courier New', monospace;
        font-size: 12pt;
        font-weight: bold;
        color: #000000;
        margin-bottom: 10px;
        text-align: left;
    }

    .tablas-contenedor {
        display: flex;
        justify-content: space-between;
        gap: 30px;
        width: 100%;
    }

    .tablas-contenedor>div {
        flex-grow: 1;
        min-width: 300px;
    }

    .table {
        width: 100%;
    }
</style>

<!-- HTML DEL FORMULARIO Y BASE DE LAS TABLAS O CONTENEDORES DONDE ESTÁS SE CREARÁN -->

<body>

    <div class="numerologyContent mx-auto p-3 py-md-5">
        <main>
            <!-- FORMULARIO -->
            <form id="myForm" class="needs-validation" novalidate>
                <div class="row g-3">
                    <div class="col-md-6">
                        <input type="text" class="formInput" id="inputFirstName" name="inputFirstName"
                            placeholder="Primer Nombre*" required>
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="formInput" id="inputMidName" name="inputMidName"
                            placeholder="Segundo Nombre (si hay)">
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="formInput" id="fLastName" name="fLastName"
                            placeholder="Primer Apellido Padre*" required>
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="formInput" id="mLastName" name="mLastName"
                            placeholder="Primer Apellido Madre">
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="formInput" id="fSurName" name="fSurName"
                            placeholder="Segundo Apellido Padre">
                    </div>
                    <div class="col-md-6">
                        <input type="text" class="formInput" id="mSurName" name="mSurName"
                            placeholder="Segundo Apellido Madre">
                    </div>
                    <div class="col-md-12">
                        <input type="text" class="formInput" id="activeName" name="activeName"
                            placeholder="Nombre Activo*" required>
                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <select class="formSelect form-select-lg mb-3" aria-label=".form-select-lg example"
                                    id="day" name="day" required>
                                    <option selected></option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="22">22</option>
                                    <option value="23">23</option>
                                    <option value="24">24</option>
                                    <option value="25">25</option>
                                    <option value="26">26</option>
                                    <option value="27">27</option>
                                    <option value="28">28</option>
                                    <option value="29">29</option>
                                    <option value="30">30</option>
                                    <option value="31">31</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <select class="formSelect form-select-lg mb-3" aria-label=".form-select-lg example"
                                    id="month" name="month" required>
                                    <option selected></option>
                                    <option value="1"></option>
                                    <option value="2"></option>
                                    <option value="3"></option>
                                    <option value="4"></option>
                                    <option value="5"></option>
                                    <option value="6"></option>
                                    <option value="7"></option>
                                    <option value="8"></option>
                                    <option value="9"></option>
                                    <option value="10"></option>
                                    <option value="11"></option>
                                    <option value="12"></option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <input type="text" class="formInput inputYear" id="year" name="year" maxlength="4"
                                    min="0" max="9999" step="1" placeholder="Año*" pattern="[0-9]{4}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 buttonContent">
                    <button type='button' id='calculate' class="w-100 fw-bold"
                        onclick="CalculateNum()"></button>
                    <span id="formError" class="errorMessage" hidden></span>
                </div>
            </form>
            <!-- TABLAS CALCULADAS -->
            <div class="container-fluid">
                <div id="resultados_ocultos">
                    <div id="page1">
                        <header class="d-flex align-items-center pb-3 mb-5 border-bottom">
                            <div class="headerTitleDiv">
                                <h2 class="letterTitle spaceTitle" id="personalNumerologyTitle"> <br> <span
                                        id="consultantName"></span></h2>
                                <div>
                                    <a class="d-flex align-items-right text-dark text-decoration-none spaceLogo">
                                        <img class="headerLogo spaceTitle"
                                            src="https://static.wixstatic.com/media/3a2a90_ecee45f4cbb544f5981629eb08074bbe~mv2.png"
                                            alt="LDB">
                                    </a>
                                </div>
                            </div>
                        </header>
                        <div class="headerTitleDiv">
                            <h3 class="letterSubTitle spaceBotFecha" id="birthDateLabel"> <label id="birthDate"
                                    class="birthDate"></label></h3>
                        </div>
                        <table class="table table-striped tableTextSize">
                            <thead>
                                <tr>
                                    <th class="tableTitles" id="numerologyTypes1"></th>
                                    <th class="tableTitles" id="numerologyTypes2"></th>
                                    <th class="tableTitles" id="numerologyTypes3"></th>
                                    <th class="tableTitles" id="numerologyTypes4"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tableTitles">
                                        <span class="goldText" id="lifeTrajectory"></span>
                                        <span id="labelLifeTrajectory"></span></td>
                                    <td class="tableTitles">
                                        <span class="goldText" id="homeTrail"></span>
                                        <span id="labelHomeTrail"></span>
                                    </td>
                                    <td class="tableTitles">
                                        <span class="goldText" id="wayOfLife"></span>
                                        <span id="labelWayOfLife"></span>
                                    </td>
                                    <td class="tableTitles">
                                        <span class="goldText" id="deepSoulLonging"></span>
                                        <span id="labelDeepSoulLonging"></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="spaceTopCosmicMission spaceBotCosmicMission">
                            <div class="headerTitleDiv">
                                <h4 class="letterSubTitle" id="labelCosmicMission"> <span class="goldText"
                                        id="cosmicMission"></span></h4>
                            </div>
                        </div>

                        <div class="spaceTopNombreCompleto spaceBotNombreCompleto">
                            <div class="headerTitleDiv">
                                <h4 class="letterSubTitle" id="fullNameCalcTitle"></h4>
                            </div>
                        </div>

                        <div class="table table-striped spaceBotTablaNombreCompleto">
                            <div id="name-number-table"></div>
                        </div>

                        <div id="house-table"></div>

                    </div>

                    <div id="page2">

                        <div id="activeNameContainer" class="spaceTop spaceBotNombreActivo">
                            <div class="headerTitleDiv">
                                <h4 class="letterSubTitle" id="activeNameCalcTitle"></h4>
                            </div>
                        </div>

                        <div class="table table-striped spaceBotTablaNombreActivo">
                            <div id="active-name-number-table"></div>
                        </div>

                        <div id="active-house-table" class="spaceBot2"></div>

                        <div class="headerTitleDiv spaceTopPinaculos spaceBotPinaculos">
                            <h4 class="letterSubTitle" id="pinnaclesTitle"></h4>
                        </div>

                        <div class="spaceBot2">
                            <div id="pinnacles-pitfalls-table"></div>
                        </div>

                        <div class="table-title">
                            <div id="family-heritage-table"></div>
                        </div>

                    </div>

                    <div id="page3">
                        <div class="spaceTop spaceBot3">
                            <div class="headerTitleDiv">
                                <h4 class="letterSubTitle" id="lifeCyclesTitle"></h4>
                            </div>
                            <div class="headerTitleDiv">
                                <p id="clientNameText" class="letterSubTitle"></p>
                                <p id="birthDateText" class="letterSubTitle"></p>
                            </div>
                        </div>
                        <div id="cycles-tables">
                            <div id="cyclesLife-table"></div>
                        </div>
                        <!-- <footer class="pt-5 my-5 text-muted border-top footerT">
                            <div class="headerTitleDiv2">
                                Carta Numerológica | Generado con el Programa de Numerología Genesys | www.lauradanaebarra.com
                            </div>
                        </footer> -->
                    </div>

                    <div id="page4">
                        <div class="spaceTop spaceBot3">
                            <div class="headerTitleDiv">
                                <h4 class="letterSubTitle" id="yearMonthTitle"></h4>
                            </div>
                        </div>

                        <div class="fecha-calculo">
                            <strong id="calcDateLabel"></strong> <span id="calculoFecha"></span>
                        </div>

                        <div class="tablas-contenedor">
                            <div id="birthdate-table"></div>
                            <div id="personal-year-month-table"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

</body>

<!-- CÓDIGO JS PARA REALIZAS LOS CALCULOS ASÍ COMO LA GENERACIÓN DINÁMICA DE LAS TABLAS NECESARIAS -->
<script type="text/javascript">
    const translations = {
        es: {
            placeholders: {
                firstName: "Primer Nombre*",
                midName: "Segundo Nombre (si hay)",
                fLastName: "Primer Apellido Padre*",
                mLastName: "Primer Apellido Madre",
                fSurName: "Segundo Apellido Padre",
                mSurName: "Segundo Apellido Madre",
                activeName: "Nombre Activo*",
                year: "Año*",
                of: "de"
            },
            selects: {
                day: "Día*",
                month: "Mes*",
                months: [
                    "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
                    "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"
                ]
            },
            form: {
                calculate: "Calcular",
                formError: "Por favor ingresa los campos obligatorios"
            },
            headers: {
                personalNumerology: "Numerología Personal: Plan de Alma de",
                birthDate: "Fecha de Nacimiento: ",
                fullNameCalc: "Cálculo de Nombre Completo",
                activeNameCalc: "Cálculo de Nombre Activo",
                pinnacles: "Tabla de Pináculos y Escollos",
                lifeCycles: "Ciclos de Vida",
                personalYearMonth: "Año Personal y Mes Personal",
                calculationDate: "Fecha cálculos:",
                cosmicMission: "Misión Cósmica: "
            },
            tables: {
                numerologyTypes: ["Numerología Pitagórica", "Numerología Híbrida", "Numerología Cabalística", "Numerología Cuántica"],
                birthdate: {
                    element: "Elemento",
                    value: "Valor",
                    day: "Día",
                    month: "Mes",
                    year: "Año",
                    lifeTrajectory: " Trayectoria de Vida",
                    homeTrail: " Sendero Natal",
                    wayOfLife: " Camino de Vida",
                    deepSoulLonging: " Anhelo Profundo del Alma"
                },
                yearMonth: {
                    personalYear: "Año Personal",
                    personalMonth: "Mes Personal"
                },
                nameNumber: {
                    soulNumber: "Número del Alma",
                    destiny: "Vía del Destino",
                    personality: "Número Personalidad Externa"
                },
                houseTable: {
                    houses: "Casas",
                    inclusion: "Inclusión",
                    induction: "Inducción",
                    bridges: "Puentes",
                    evolution: "Evolución",
                    unconscious: "Inconsciente"
                },
                pinnaclesTable: {
                    years: "Años",
                    pinnacles: "Pináculos",
                    pitfalls: "Escollos",
                    firstCycle: "Primer Ciclo",
                    secondCycle: "Segundo Ciclo",
                    thirdCycle: "Tercer Ciclo",
                    fourthCycle: "Cuarto Ciclo"
                },
                familyHeritage: {
                    title: "Herencias Familiares",
                    columns: ["No Reducido", "Reducido"],
                    hpp: "HPP",
                    ncs: "NCS",
                    dm: "DM",
                    eje: "EJE",
                    mf: "MF",
                    ms: "MS",
                    mfe: "MFE"
                },
                cyclesLife: {
                    habitants: "Habitantes",
                    cycles: "Ciclos",
                    hab: "Hab.",
                    ap: "AP."
                }
            },
            pdf: {
                footer: "Generado con el programa de numerología Genesys"
            }
        },
        en: {
            placeholders: {
                firstName: "First Name*",
                midName: "Middle Name (if any)",
                fLastName: "Father's First Surname*",
                mLastName: "Mother's First Surname",
                fSurName: "Father's Second Surname",
                mSurName: "Mother's Second Surname",
                activeName: "Active Name*",
                year: "Year*",
                of: "de"
            },
            selects: {
                day: "Day*",
                month: "Month*",
                months: [
                    "January", "February", "March", "April", "May", "June",
                    "July", "August", "September", "October", "November", "December"
                ]
            },
            form: {
                calculate: "Calculate",
                formError: "Please complete the required fields"
            },
            headers: {
                personalNumerology: "Personal Numerology: Soul Plan of",
                birthDate: "Birth Date: ",
                fullNameCalc: "Full Name Calculation",
                activeNameCalc: "Active Name Calculation",
                pinnacles: "Pinnacles and Pitfalls Table",
                lifeCycles: "Life Cycles",
                personalYearMonth: "Personal Year and Personal Month",
                calculationDate: "Calculation date:",
                cosmicMission: "Cosmic Mission: "
            },
            tables: {
                numerologyTypes: ["Pythagorean Numerology", "Hybrid Numerology", "Kabbalistic Numerology", "Quantum Numerology"],
                birthdate: {
                    element: "Element",
                    value: "Value",
                    day: "Day",
                    month: "Month",
                    year: "Year",
                    lifeTrajectory: " Life Path",
                    homeTrail: " Birth Path",
                    wayOfLife: " Destiny Path",
                    deepSoulLonging: " Deep Soul's Desire"
                },
                yearMonth: {
                    personalYear: "Personal Year",
                    personalMonth: "Personal Month"
                },
                nameNumber: {
                    soulNumber: "Soul Number",
                    destiny: "Destiny Path",
                    personality: "External Personality Number"
                },
                houseTable: {
                    houses: "Houses",
                    inclusion: "Inclusion",
                    induction: "Induction",
                    bridges: "Bridges",
                    evolution: "Evolution",
                    unconscious: "Unconscious"
                },
                pinnaclesTable: {
                    years: "Years",
                    pinnacles: "Pinnacles",
                    pitfalls: "Pitfalls",
                    firstCycle: "First Cycle",
                    secondCycle: "Second Cycle",
                    thirdCycle: "Third Cycle",
                    fourthCycle: "Fourth Cycle"
                },
                familyHeritage: {
                    title: "Family Heritage",
                    columns: ["Unreduced", "Reduced"],
                    hpp: "HPP",
                    ncs: "NCS",
                    dm: "DM",
                    eje: "AXIS",
                    mf: "PF",
                    ms: "MS",
                    mfe: "PFE"
                },
                cyclesLife: {
                    habitants: "Inhabitants",
                    cycles: "Cycles",
                    hab: "Inhab.",
                    ap: "AP."
                }
            },
            pdf: {
                footer: "Generated with the Genesys numerology software"
            }
        }
    };

    let language = 'es';
    let footerText = '';
    let t = translations['es'];

    window.onmessage = (event) => {
        if (event.data.language) {
            language = event.data.language;
            applyTranslations(language);
        }
    }

    function applyTranslations(lang) {
        t = translations[lang];        

        // Placeholders de inputs
        document.getElementById("inputFirstName").placeholder = t.placeholders.firstName;
        document.getElementById("inputMidName").placeholder = t.placeholders.midName;
        document.getElementById("inputFLastName").placeholder = t.placeholders.fLastName;
        document.getElementById("inputFSurName").placeholder = t.placeholders.fSurName;
        document.getElementById("inputMLastName").placeholder = t.placeholders.mLastName;
        document.getElementById("inputMSurName").placeholder = t.placeholders.mSurName;
        document.getElementById("inputActiveName").placeholder = t.placeholders.activeName;
        document.getElementById("year").placeholder = t.placeholders.year;

        // Select Día
        const daySelect = document.getElementById("day");
        if (daySelect.options.length > 0) {
            daySelect.options[0].text = t.selects.day;
        }

        // Select Mes
        const monthSelect = document.getElementById("month");
        if (monthSelect.options.length > 0) {
            monthSelect.options[0].text = t.selects.month;
            for (let i = 1; i < monthSelect.options.length; i++) {
            monthSelect.options[i].text = t.selects.months[i - 1];
            }
        }

        // Botón calcular
        const btn = document.getElementById("calculate");
        if (btn) btn.innerText = t.form.calculate;

        // Errores
        document.querySelectorAll(".errorMessage").forEach(el => {
            el.innerText = t.form.formError;
        });

        // Cabeceras visibles (solo si están presentes)
        const headerIds = {
            "personalNumerologyTitle": t.headers.personalNumerology,
            "birthDateLabel": t.headers.birthDate,
            "labelLifeTrajectory": t.tables.birthdate.lifeTrajectory,
            "labelHomeTrail": t.tables.birthdate.homeTrail,
            "labelWayOfLife": t.tables.birthdate.wayOfLife,
            "labelDeepSoulLonging": t.tables.birthdate.deepSoulLonging,
            "fullNameCalcTitle": t.headers.fullNameCalc,
            "activeNameCalcTitle": t.headers.activeNameCalc,
            "pinnaclesTitle": t.headers.pinnacles,
            "lifeCyclesTitle": t.headers.lifeCycles,
            "yearMonthTitle": t.headers.personalYearMonth,
            "calcDateLabel": t.headers.calculationDate,
            "numerologyTypes1": t.tables.numerologyTypes[0],
            "numerologyTypes2": t.tables.numerologyTypes[1],
            "numerologyTypes3": t.tables.numerologyTypes[2],
            "numerologyTypes4": t.tables.numerologyTypes[3],
            "labelCosmicMission": t.headers.cosmicMission,
        };
        for (const [id, value] of Object.entries(headerIds)) {
            const el = document.getElementById(id);
            if (el) el.innerText = value;
        }

        //PDF Footer
        footerText = t.pdf.footer;
    }

    //OBTENCIÓN DE LA INFORMACIÓN SUMINISTRADA EN EL FORMULARIO ASÍ COMO LA VALIDACIÓN DE ESTA
    let isValid = false
    var form = document.getElementById('myForm');
    let formError = document.getElementById("formError")

    let firstName = document.getElementById("inputFirstName")
    let midName = document.getElementById("inputMidName")
    let fLastName = document.getElementById("fLastName")
    let fSurName = document.getElementById("fSurName")
    let mLastName = document.getElementById("mLastName")
    let mSurName = document.getElementById("mSurName")
    let activeName = document.getElementById("activeName")

    let day = document.getElementById("day")
    let month = document.getElementById("month")
    let year = document.getElementById("year")

    // document.getElementById("urlRef").innerHTML = "www.lauradanaebarra.com"

    firstName.onchange = function () {
        InputValidaton(firstName)
    }
    fLastName.onchange = function () {
        InputValidaton(fLastName)
    }
    mLastName.onchange = function () {
        InputValidaton(mLastName)
    }
    activeName.onchange = function () {
        InputValidaton(activeName)
    }
    day.onchange = function () {
        InputValidaton(day)
    }
    month.onchange = function () {
        InputValidaton(month)
    }
    year.onchange = function () {
        InputValidaton(year)
    }

    function InputValidaton(input) {
        if (input.value == "" || input.value == t.selects.day || input.value == t.selects.month || (input.name == t.placeholders.year && input.value.length < 4)) {
            input.classList.add("inputError")
            formError.removeAttribute("hidden")
        } else {
            input.classList.remove("inputError")
            formError.setAttribute("hidden", "hidden")
        }
    }

    (function () {
        // Obtener el formulario y los campos requeridos
        var form = document.getElementById('myForm');
        var requiredFields = Array.from(form.querySelectorAll('[required]'));

        // Verificar los campos requeridos en cada cambio
        requiredFields.forEach(function (field) {
            field.addEventListener('input', validateForm);
        });

        // Validar el formulario
        function validateForm() {
            isValid = requiredFields.every(function (field) {
                return field.checkValidity();
            });
        }
    })();

    var dataToSave = []
    //INICIO DE LOS CALCULOS PERTINENTES PARA LA CREACIÓN DE LAS TABLAS Y MUESTRA DE LA INFORMACIÓN
    // Numerology
    function CalculateNum() {
        InputValidaton(firstName)
        InputValidaton(fLastName)
        InputValidaton(mLastName)
        InputValidaton(activeName)
        InputValidaton(day)
        InputValidaton(month)
        InputValidaton(year)

        const divOculto = document.querySelector('#resultados_ocultos');

        if (!isValid) {
            formError.removeAttribute("hidden")
            divOculto.style.display = 'none';
            return
        }

        divOculto.style.display = 'block';

        const alphabet = {
            A: 1, Á: 1, J: 1, S: 1, B: 2, K: 2, T: 2, C: 3, L: 3, U: 3, Ú: 3, Ü: 3, D: 4,
            M: 4, V: 4, E: 5, É: 5, N: 5, Ñ: 5, W: 5, F: 6, O: 6, Ó: 6, X: 6, G: 7, P: 7, Y: 7, H: 8,
            Q: 8, Z: 8, I: 9, Í: 9, R: 9
        }

        const consonants = {
            J: 1, S: 1, B: 2, K: 2, T: 2, C: 3, L: 3, D: 4,
            M: 4, V: 4, N: 5, Ñ: 5, W: 5, F: 6, X: 6, G: 7, P: 7, Y: 7, H: 8,
            Q: 8, Z: 8, R: 9
        }

        const vowels = { A: 1, Á: 1, U: 3, Ú: 3, Ü: 3, E: 5, É: 5, O: 6, Ó: 6, Y: 7, I: 9, Í: 9 }

        const fullName = firstName.value.trim() + midName.value.trim() + fLastName.value.trim() + mLastName.value.trim()
        let fullNameNumber = ''
        if (midName == '') {
            fullNameNumber = firstName.value.trim() + "  " + fLastName.value.trim() + "  " + mLastName.value.trim()
        } else {
            fullNameNumber = firstName.value.trim() + "  " + midName.value.trim() + "  " + fLastName.value.trim() + "  " + mLastName.value.trim()
        }

        //ConsultantName
        document.getElementById("consultantName").innerHTML = fullNameNumber
        document.getElementById("clientNameText").innerText = fullNameNumber;
        document.getElementById("birthDateText").innerText = `: ${day.value} ${t.placeholders.of} ${month.value} ${t.placeholders.of} ${year.value}`;

        // Birthdate
        let lifeTrajectory = LifeTrajectory(day.value, month.value, year.value)
        let homeTrail = HomeTrail(day.value, month.value, year.value)
        let wayOfLife = WayOfLife(day.value, month.value, year.value)
        let deepSoulLonging = DeepSoulLonging(day.value, month.value, year.value)

        // Name Numbers
        let soulNumber = SoulNumber(fullName, vowels)
        let destinationNumber = DestinationNumber(fullName, alphabet)
        let personalityNumber = PersonalityNumber(fullName, consonants)
        NameNumber(consonants, vowels, fullNameNumber, 1, soulNumber, destinationNumber, personalityNumber)

        // House Table
        let inclution = Inclution(fullName, alphabet)
        let induction = Induction(inclution)
        let bridges = Bridges(inclution)
        let evolution = Evolution(inclution)
        let unconscious = Unconscious(inclution, alphabet, fullName)
        let induction2 = Induction(unconscious)
        HouseTable(inclution, induction, bridges, evolution, unconscious, induction2)

        // Active Name Number
        let activeSoulNumber = SoulNumber(activeName.value, vowels)
        let activeDestinationNumber = DestinationNumber(activeName.value, alphabet)
        let activePersonalityNumber = PersonalityNumber(activeName.value, consonants)
        // Active House Table
        let activeInclution = Inclution(activeName.value, alphabet)
        let activeInduction = Induction(activeInclution)

        if (activeName.value != "") {
            NameNumber(consonants, vowels, activeName.value, 2, activeSoulNumber, activeDestinationNumber, activePersonalityNumber)
            ActiveHouseTable(activeInclution, activeInduction)
        } else {
            const activeNameContainer = document.getElementById("activeNameContainer")
            activeNameContainer.style.display = "none";
        }

        // Pinnacles Pitfalls Table
        let cycleYear = CicleYears(lifeTrajectory)
        let pinacles = Pinacles(day.value, month.value, year.value)
        let pitfalls = Pitfalls(day.value, month.value, year.value)
        PinnaclesPitfallsTable(cycleYear, pinacles, pitfalls)

        // Family Heritage Table
        let familyName = firstName.value.trim() + midName.value.trim() + fLastName.value.trim() + fSurName.value.trim() + mLastName.value.trim() + mSurName.value.trim()
        let hpp = GetHPP(inclution)
        let ncs = GetNCS(inclution)
        let dm = GetDM(hpp, ncs)
        let eje = GetEJE(inclution)
        let mf = GetMF(familyName, hpp)
        let ms = GetMS(familyName, ncs)
        let mfe = GetMFE(mf, ms)
        let cosmicMission = CosmicMission(wayOfLife, destinationNumber)
        FamilyHeritageTable(hpp, ncs, dm, eje, mf, ms, mfe)

        // Cycles Life Table
        CyclesLifeTable(parseInt(year.value), inclution, wayOfLife)

        // Cálculo del Año y Mes Personal
        document.getElementById("calculoFecha").innerText = new Date().toLocaleDateString();
        let personalYear = CalculatePersonalYear(parseInt(day.value), parseInt(month.value));
        let personalMonth = CalculatePersonalMonth(personalYear);
        // Generación de la Tabla de Año y Mes personal
        GenerateBirthdateTable(day.value, month.value, year.value);
        GeneratePersonalYearMonthTable(personalYear, personalMonth);

        // Date Numbers
        let monthText = ""
        if (month.value == 1) {
            monthText = t.selects.months[0]
        } else if (month.value == 2) {
            monthText = t.selects.months[1]
        } else if (month.value == 3) {
            monthText = t.selects.months[2]
        } else if (month.value == 4) {
            monthText = t.selects.months[3]
        } else if (month.value == 5) {
            monthText = t.selects.months[4]
        } else if (month.value == 6) {
            monthText = t.selects.months[5]
        } else if (month.value == 7) {
            monthText = t.selects.months[6]
        } else if (month.value == 8) {
            monthText = t.selects.months[7]
        } else if (month.value == 9) {
            monthText = t.selects.months[8]
        } else if (month.value == 10) {
            monthText = t.selects.months[9]
        } else if (month.value == 11) {
            monthText = t.selects.months[10]
        } else if (month.value == 12) {
            monthText = t.selects.months[11]
        }
        document.getElementById("birthDate").innerHTML = day.value + ` ${t.placeholders.of} ` + monthText + `  ${t.placeholders.of} ` + year.value
        document.getElementById("lifeTrajectory").innerHTML = lifeTrajectory[0] + "/" + lifeTrajectory[1]
        document.getElementById("homeTrail").innerHTML = homeTrail[0] + "/" + homeTrail[1]

        let divWayOfLife = document.getElementById("wayOfLife")
        if (wayOfLife.length > 2) {
            divWayOfLife.innerHTML = wayOfLife[0] + "/" + wayOfLife[1] + "/" + wayOfLife[2]
        } else if (destinationNumber.length == 2) {
            divWayOfLife.innerHTML = wayOfLife[0] + "/" + wayOfLife[1]
        } else {
            divWayOfLife.innerHTML = wayOfLife[0]
        }
        document.getElementById("deepSoulLonging").innerHTML = deepSoulLonging[0] + "/" + deepSoulLonging[1]

        // Cosmic Mission
        document.getElementById("cosmicMission").innerHTML = cosmicMission[1]

        dataToSave = [firstName.value.trim(), midName.value.trim(), fLastName.value.trim(), fSurName.value.trim(), mLastName.value.trim(), mSurName.value.trim(), activeName.value.trim(), day.value, month.value, year.value]
    }

    // PDF
    window.jsPDF = window.jspdf.jsPDF
    window.onmessage = (event) => {
        //SE VALIDA SI HAY DATA PARA ENVIAR ASÍ COMO SI SE DIO CLIC EN EL BOTÓN DE GUARDAR Y DESCARGAR
        //SI TODO FUE CORRECTO SE ENVÍA LA INFORMACIÓN POR MEDIO DE UN POSTMESSAGE PARA QUE PUEDA RECIBIRSE DESDE WIX Y GUARDARSE EN LA DB
        if (event.data.click === true && dataToSave.length > 0) {
            ConvertHTMLFileToPDF()
            window.parent.postMessage(dataToSave, "https://www.lauradanaebarra.com/")
        }
    }

    // GENERATE PDF
    async function ConvertHTMLFileToPDF() {
        const doc = new jsPDF({
            orientation: 'landscape',
            unit: 'pt',
            format: 'letter'
        });

        async function addDivToPDF(divId, addNewPage) {
            const margin = 20;

            const canvas = await html2canvas(document.querySelector(`#${divId}`), {
                useCORS: true
            });

            const imgWidth = doc.internal.pageSize.getWidth() - 2 * margin;
            const imgHeight = (canvas.height * imgWidth) / canvas.width;

            const imgData = canvas.toDataURL('image/png');
            if (addNewPage) {
                doc.addPage();
            }
            doc.addImage(imgData, 'PNG', margin, margin, imgWidth, imgHeight);

            const pageHeight = doc.internal.pageSize.getHeight();

            doc.setFont("courier", "monospace", "sans-serif");
            doc.setFontSize(10);
            doc.setTextColor(128, 128, 128);
            doc.text(footerText, margin, pageHeight - 20);
        }

        await addDivToPDF('page1', false);
        await addDivToPDF('page2', true);
        await addDivToPDF('page3', true);
        await addDivToPDF('page4', true);

        const clientName = document.getElementById("consultantName").textContent.trim().replace(/\s{2,}/g, " ").replace(/\s+/g, "_");
        doc.save(`${clientName}.pdf`);
    }


    // LifeTrajectory
    function LifeTrajectory(day, month, year) {
        let dateValues = CalculateDateValues(day, month, year)
        let dayScore = dateValues[0]
        let monthScore = dateValues[1]
        let yearScore = dateValues[2]

        let noReduced = dayScore + monthScore + yearScore
        let reduced = SingleDigit(noReduced)
        let lifeTrajectory = [noReduced, reduced]

        return lifeTrajectory
    }
    // HomeTrail
    function HomeTrail(day, month, year) {
        let dateValues = CalculateDateValues(day, month, year)
        let dayScore = parseInt(day)
        let monthScore = parseInt(month)
        let yearScore = dateValues[2]

        let noReduced = dayScore + monthScore + yearScore
        let reduced = SingleDigit(noReduced)
        let lifeTrajectory = [noReduced, reduced]

        return lifeTrajectory
    }
    // WayOfLife
    function WayOfLife(day, month, year) {
        let noReduced = parseInt(day) + parseInt(month) + parseInt(year)
        let reduced = NameSingleDigit(noReduced)
        let wayOfLife = []
        if (reduced.length != 0) {
            if (reduced.length > 1) {
                wayOfLife = [noReduced, reduced[0], reduced[1]]
            } else {
                wayOfLife = [noReduced, reduced[0]]
            }
        } else {
            wayOfLife = [noReduced]
        }

        return wayOfLife
    }
    // DeepSoulLonging
    function DeepSoulLonging(day, month, year) {
        let dateValues = CalculateDateValues(day, month, year)
        let dayScore = parseInt(day)
        let monthScore = dateValues[1]
        let yearScore = dateValues[2]

        if (yearScore >= 10) {
            let tempScore = 0
            for (let i = 0; i < year.length; i++) {
                let curValue = year.toString().charAt(i)
                tempScore = tempScore + parseInt(curValue)
            }
            yearScore = tempScore
        }

        let noReduced = (dayScore + monthScore) + (monthScore + yearScore)
        let reduced = SingleDigit(noReduced)
        let deepSoulLonging = [noReduced, reduced]

        return deepSoulLonging
    }

    // Name Number
    function NameNumber(consonants, vowels, fullName, nameType, soulNumber, destinationNumber, personalityNumber) {
        let vowelNumbers = []
        let consonantNumbers = []
        let isConsonant = false

        for (let i = 0; i < fullName.length; i++) {
            let curChar = fullName.charAt(i).toUpperCase()

            if (curChar == "y" || curChar == "Y") {
                isConsonant = ValidateYLetter(fullName, curChar, i)

                if (isConsonant == true) {
                    if (consonants[curChar] != undefined) {
                        let consValue = consonants[curChar]
                        consonantNumbers.push(consValue)
                        vowelNumbers.push(" ")
                    }
                } else {
                    if (vowels[curChar] != undefined) {
                        let vowelValue = vowels[curChar]
                        consonantNumbers.push(" ")
                        vowelNumbers.push(vowelValue)
                    }
                }
            } else {
                if (consonants[curChar] != undefined) {
                    let consValue = consonants[curChar]
                    consonantNumbers.push(consValue)
                    vowelNumbers.push(" ")
                }
                if (vowels[curChar] != undefined) {
                    let vowelValue = vowels[curChar]
                    consonantNumbers.push(" ")
                    vowelNumbers.push(vowelValue)
                }
            }

            if (fullName.charAt(i).toUpperCase() == " ") {
                consonantNumbers.push(" ")
                vowelNumbers.push(" ")
            }
        }

        let html = '<table class="table table-bordered tableName">'
        html += '<tbody>'
        html += '<tr class="tableTextRegular soulText">'
        for (let i = 0; i < fullName.length; i++) {
            html += '<td>' + vowelNumbers[i] + '</td>'
        }
        if (soulNumber.length > 2) {
            html += '<td class="goldText soulText">' +
                (ValidateMasterNumber(soulNumber[0]) ? ('<span class="sameDigit">' + soulNumber[0] + '</span>')
                    : soulNumber[0]) +
                "/" + (ValidateMasterNumber(soulNumber[1]) ? ('<span class="sameDigit">' + soulNumber[1] + '</span>')
                    : soulNumber[1]) +
                "/" + (soulNumber[2] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>')
                    : soulNumber[2]) +
                '</td>'
        } else if (soulNumber.length == 2) {
            html += '<td class="goldText soulText">' +
                (ValidateMasterNumber(soulNumber[0]) ? ('<span class="sameDigit">' + soulNumber[0] + '</span>')
                    : soulNumber[0]) +
                "/" + (soulNumber[1] == 0 ? ('<span class="sameDigit">' + soulNumber[1] + '</span>')
                    : soulNumber[1]) +
                '</td>'
        } else {
            html += '<td class="goldText soulText">' +
                (soulNumber[0] == 0 ? ('<span class="sameDigit">' + soulNumber[0] + '</span>')
                    : soulNumber[0]) +
                '</td>'
        }
        html += `<td class="tableTitles2 tableTextBold">${t.tables.nameNumber.soulNumber}</td>`
        html += '</tr>'

        html += '<tr class="tableTextBold tableTitles2">'
        for (let i = 0; i < fullName.length; i++) {
            html += '<td>' + fullName.charAt(i).toUpperCase() + '</td>'
        }
        if (destinationNumber.length > 2) {
            html += '<td class="goldText">' +
                (ValidateMasterNumber(destinationNumber[0]) ? ('<span class="sameDigit">' + destinationNumber[0] + '</span>')
                    : destinationNumber[0]) +
                "/" + (ValidateMasterNumber(destinationNumber[1]) ? ('<span class="sameDigit">' + destinationNumber[1] + '</span>')
                    : destinationNumber[1]) +
                "/" + (destinationNumber[2] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>')
                    : destinationNumber[2]) +
                '</td>'
        } else if (destinationNumber.length == 2) {
            html += '<td class="goldText">' +
                (ValidateMasterNumber(destinationNumber[0]) ? ('<span class="sameDigit">' + destinationNumber[0] + '</span>')
                    : destinationNumber[0]) +
                "/" + (destinationNumber[1] == 0 ? ('<span class="sameDigit">' + destinationNumber[1] + '</span>')
                    : destinationNumber[1]) +
                '</td>'
        } else {
            html += '<td class="goldText soulText">' +
                (destinationNumber[0] == 0 ? ('<span class="sameDigit">' + destinationNumber[0] + '</span>')
                    : destinationNumber[0]) +
                '</td>'
        }
        html += `<td class="tableTitles2">${t.tables.nameNumber.destiny}</td>`
        html += '</tr>'

        html += '<tr class="tableTextRegular">'
        for (let i = 0; i < fullName.length; i++) {
            html += '<td>' + consonantNumbers[i] + '</td>'
        }
        if (personalityNumber.length > 2) {
            html += '<td class="goldText personalityText">' +
                (ValidateMasterNumber(personalityNumber[0]) ? ('<span class="sameDigit">' + personalityNumber[0] + '</span>')
                    : personalityNumber[0]) +
                "/" + (ValidateMasterNumber(personalityNumber[1]) ? ('<span class="sameDigit">' + personalityNumber[1] + '</span>')
                    : personalityNumber[1]) +
                "/" + (personalityNumber[2] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>')
                    : personalityNumber[2]) +
                '</td>'
        } else if (personalityNumber.length == 2) {
            html += '<td class="goldText personalityText">' +
                (ValidateMasterNumber(personalityNumber[0]) ? ('<span class="sameDigit">' + personalityNumber[0] + '</span>')
                    : personalityNumber[0]) +
                "/" + (personalityNumber[1] == 0 ? ('<span class="sameDigit">' + personalityNumber[1] + '</span>')
                    : personalityNumber[1]) +
                '</td>'
        } else {
            html += '<td class="goldText soulText">' +
                (personalityNumber[0] == 0 ? ('<span class="sameDigit">' + personalityNumber[0] + '</span>')
                    : personalityNumber[0]) +
                '</td>'
        }
        html += `<td class="tableTitles2 tableTextBold">${t.tables.nameNumber.personality}</td>`
        html += '</tr>'

        html += '</tbody>'
        html += '</table>'

        if (nameType == 1) {
            document.getElementById("name-number-table").innerHTML = html
        } else {
            document.getElementById("active-name-number-table").innerHTML = html
        }
    }
    // SoulNumber
    function SoulNumber(fullName, vowels) {
        let nameScore = 0
        let isConsonant = false

        for (let i = 0; i < fullName.length; i++) {
            let curChar = fullName.charAt(i).toUpperCase()

            if (curChar == "y" || curChar == "Y") {
                isConsonant = ValidateYLetter(fullName, curChar, i)
            } else {
                isConsonant = false
            }

            if (isConsonant == false) {
                let curValue = vowels[curChar]

                if (curValue != undefined) {
                    nameScore = nameScore + curValue
                }
            }
        }

        let noReduced = nameScore
        let reduced = NameSingleDigit(noReduced)
        let soulNumber = []
        if (reduced.length != 0) {
            if (reduced.length > 1) {
                soulNumber = [noReduced, reduced[0], reduced[1]]
            } else {
                soulNumber = [noReduced, reduced[0]]
            }
        } else {
            soulNumber = [noReduced]
        }

        return soulNumber
    }
    // DestinationNumber
    function DestinationNumber(fullName, alphabet) {
        let nameScore = 0

        for (let i = 0; i < fullName.length; i++) {
            let curChar = fullName.charAt(i).toUpperCase()
            let curValue = alphabet[curChar]

            if (curValue != undefined) {
                nameScore = nameScore + curValue
            }
        }

        let noReduced = nameScore
        let reduced = NameSingleDigit(noReduced)
        let destinationNumber = []
        if (reduced.length != 0) {
            if (reduced.length > 1) {
                destinationNumber = [noReduced, reduced[0], reduced[1]]
            } else {
                destinationNumber = [noReduced, reduced[0]]
            }
        } else {
            destinationNumber = [noReduced]
        }

        return destinationNumber
    }
    // PersonalityNumber
    function PersonalityNumber(fullName, consonants) {
        let nameScore = 0
        let isConsonant = true

        for (let i = 0; i < fullName.length; i++) {
            let curChar = fullName.charAt(i).toUpperCase()
            let curValue = consonants[curChar]

            if (curChar == "y" || curChar == "Y") {
                isConsonant = ValidateYLetter(fullName, curChar, i)
            } else {
                isConsonant = true
            }

            if (isConsonant == true) {
                let curValue = consonants[curChar]

                if (curValue != undefined) {
                    nameScore = nameScore + curValue
                }
            }
        }
        let noReduced = nameScore
        let reduced = NameSingleDigit(noReduced)
        let personalityNumber = []
        if (reduced.length != 0) {
            if (reduced.length > 1) {
                personalityNumber = [noReduced, reduced[0], reduced[1]]
            } else {
                personalityNumber = [noReduced, reduced[0]]
            }
        } else {
            personalityNumber = [noReduced]
        }

        return personalityNumber
    }
    function ValidateYLetter(fullName, curChar, index) {
        const nextLetter = fullName.charAt(index + 1);
        let isConsonant = false

        if (curChar === 'y' && fullName.charAt(index - 1) == undefined) { //First letter
            isConsonant = true
        } else if (nextLetter != undefined && (fullName.charAt(index + 1) === 'a'
            || fullName.charAt(index + 1) === 'e' || fullName.charAt(index + 1) === 'i')
            || fullName.charAt(index + 1) === 'o' || fullName.charAt(index + 1) === 'u') { // has a vowel after the 'y'
            isConsonant = true
        } else {
            isConsonant = false
        }
        return isConsonant
    }

    // Inclution
    function Inclution(fullName, alphabet) {
        let house1 = 0
        let house2 = 0
        let house3 = 0
        let house4 = 0
        let house5 = 0
        let house6 = 0
        let house7 = 0
        let house8 = 0
        let house9 = 0

        //firstName
        for (let i = 0; i < fullName.length; i++) {
            let curChar = fullName.charAt(i).toUpperCase()
            let curValue = alphabet[curChar]

            if (curValue == 1) {
                house1++
            } else if (curValue == 2) {
                house2++
            } else if (curValue == 3) {
                house3++
            } else if (curValue == 4) {
                house4++
            } else if (curValue == 5) {
                house5++
            } else if (curValue == 6) {
                house6++
            } else if (curValue == 7) {
                house7++
            } else if (curValue == 8) {
                house8++
            } else if (curValue == 9) {
                house9++
            }
        }

        let inclution = [house1, house2, house3, house4, house5, house6, house7, house8, house9]

        return inclution
    }

    // Induction
    function Induction(inclution) {
        let house1 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 0)), "<br>")
        let house2 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 1)), "<br>")
        let house3 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 2)), "<br>")
        let house4 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 3)), "<br>")
        let house5 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 4)), "<br>")
        let house6 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 5)), "<br>")
        let house7 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 6)), "<br>")
        let house8 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 7)), "<br>")
        let house9 = Array.prototype.join.call(SingleDigit(CalculateInduction(inclution, 8)), "<br>")

        let induction = [house1, house2, house3, house4, house5, house6, house7, house8, house9]

        return induction
    }
    function CalculateInduction(inclution, index) {
        let house = []

        let val1 = 0
        let val2 = 0
        let val3 = 0

        if (inclution[index] > 0) {
            val1 = inclution[inclution[index] - 1]

            if (val1 > 0) {
                val2 = inclution[val1 - 1]

                if (val2 > 0) {
                    val3 = inclution[val2 - 1]
                }
            }
        }
        house.push(val1, val2, val3)

        return house
    }

    // Bridges
    function Bridges(inclution) {
        let house1 = SingleDigit(CalculateBridges(inclution, 0))
        let house2 = SingleDigit(CalculateBridges(inclution, 1))
        let house3 = SingleDigit(CalculateBridges(inclution, 2))
        let house4 = SingleDigit(CalculateBridges(inclution, 3))
        let house5 = SingleDigit(CalculateBridges(inclution, 4))
        let house6 = SingleDigit(CalculateBridges(inclution, 5))
        let house7 = SingleDigit(CalculateBridges(inclution, 6))
        let house8 = SingleDigit(CalculateBridges(inclution, 7))
        let house9 = SingleDigit(CalculateBridges(inclution, 8))

        let bridges = [house1, house2, house3, house4, house5, house6, house7, house8, house9]

        return bridges
    }
    function CalculateBridges(inclution, index) {
        let bridgeHouse = inclution[index] - (index + 1)

        if (bridgeHouse < 0) {
            bridgeHouse = (bridgeHouse * -1)
        }

        return bridgeHouse
    }

    // Evolution
    function Evolution(inclution) {
        let house1 = SingleDigit(CalculateEvolution(inclution, 0))
        let house2 = SingleDigit(CalculateEvolution(inclution, 1))
        let house3 = SingleDigit(CalculateEvolution(inclution, 2))
        let house4 = SingleDigit(CalculateEvolution(inclution, 3))
        let house5 = SingleDigit(CalculateEvolution(inclution, 4))
        let house6 = SingleDigit(CalculateEvolution(inclution, 5))
        let house7 = SingleDigit(CalculateEvolution(inclution, 6))
        let house8 = SingleDigit(CalculateEvolution(inclution, 7))
        let house9 = SingleDigit(CalculateEvolution(inclution, 8))

        let evolution = [house1, house2, house3, house4, house5, house6, house7, house8, house9]

        return evolution
    }
    function CalculateEvolution(inclution, index) {
        let count = 0

        inclution.forEach(element => {
            if (element == (index + 1)) {
                count++
            }
        });

        let evoHouse = inclution[index] + count

        return evoHouse
    }

    // Unconscius
    function Unconscious(inclution, alphabet, fullName) {
        let house1 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 0))
        let house2 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 1))
        let house3 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 2))
        let house4 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 3))
        let house5 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 4))
        let house6 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 5))
        let house7 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 6))
        let house8 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 7))
        let house9 = SingleDigit(CalculateUnconscious(inclution, alphabet, fullName, 8))

        let unconscious = [house1, house2, house3, house4, house5, house6, house7, house8, house9]

        return unconscious
    }
    function CalculateUnconscious(inclution, alphabet, fullName, index) {
        let curChar = ""
        let curValue = 0

        if (inclution[index] > 0) {
            curChar = fullName.charAt(inclution[index] - 1).toUpperCase()
            curValue = alphabet[curChar]
        } else if (inclution[index] <= 0) {
            curChar = fullName.charAt(index).toUpperCase()

            if (curChar == undefined || curChar == "") {
                curValue = 0
            } else {
                curValue = alphabet[curChar]
            }
        }

        return curValue
    }

    // HouseTable
    function HouseTable(inclution, induction, bridges, evolution, unconscious, induction2) {
        let html = '<table class="table table-striped tableTextSize">'
        html += '<thead>'
        html += '<tr>'
        html += `<th class="tableTitles2">${t.tables.houseTable.houses}</th>`
        html += '<th>1</th>'
        html += '<th>2</th>'
        html += '<th>3</th>'
        html += '<th>4</th>'
        html += '<th>5</th>'
        html += '<th>6</th>'
        html += '<th>7</th>'
        html += '<th>8</th>'
        html += '<th>9</th>'
        html += '</tr>'
        html += '</thead>'

        html += '<tbody>'
        html += '<tr>'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.inclusion}</th>`
        for (let i = 0; i < inclution.length; i++) {
            if (inclution[i] == 0) {
                html += '<td class="zeroValue tableTextAlignB">' + "0*" + '</td>';
            } else {
                html += `<td class="tableTextAlignB">${inclution[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.induction}</th>`
        for (let i = 0; i < induction.length; i++) {
            if (induction[i] === "0<br>0<br>0") {
                html += `<td class="zeroValue">0*<br>0*<br>0*</td>`;
            } else {
                html += `<td>${induction[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '<tr>'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.bridges}</th>`
        for (let i = 0; i < bridges.length; i++) {
            if (bridges[i] == 0) {
                html += '<td class="zeroValue tableTextAlignT">' + "0*" + '</td>';
            } else {
                html += `<td class="tableTextAlignT">${bridges[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.evolution}</th>`
        for (let i = 0; i < evolution.length; i++) {
            if (evolution[i] == 0) {
                html += '<td class="zeroValue">' + "0*" + '</td>';
            } else {
                html += `<td>${evolution[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '<tr>'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.unconscious}</th>`
        for (let i = 0; i < unconscious.length; i++) {
            if (unconscious[i] == 0) {
                html += '<td class="zeroValue">' + "0*" + '</td>';
            } else {
                html += `<td>${unconscious[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.induction}</th>`
        for (let i = 0; i < induction2.length; i++) {
            if (induction2[i] === "0<br>0<br>0") {
                html += `<td class="zeroValue">0*<br>0*<br>0*</td>`;
            } else {
                html += `<td>${induction2[i]}</td>`;
            }
        }
        html += '</tr>'
        html += '</tbody>'
        html += '</table>'
        document.getElementById("house-table").innerHTML = html
    }
    // Active House Table
    function ActiveHouseTable(activeInclution, activeInduction) {
        let html = '<table class="table table-striped tableTextSize">'
        html += '<thead>'

        html += '<tr>'
        html += `<th class="tableTitles2">${t.tables.houseTable.houses}</th>`
        html += '<th>1</th>'
        html += '<th>2</th>'
        html += '<th>3</th>'
        html += '<th>4</th>'
        html += '<th>5</th>'
        html += '<th>6</th>'
        html += '<th>7</th>'
        html += '<th>8</th>'
        html += '<th>9</th>'
        html += '</tr>'
        html += '</thead>'

        html += '<tbody>'
        html += '<tr>'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.inclusion}</th>`
        for (let i = 0; i < activeInclution.length; i++) {
            if (activeInclution[i] == 0) {
                html += '<td class="zeroValue">' + "0*" + '</td>';
            } else {
                html += `<td>${activeInclution[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.houseTable.induction}</th>`
        for (let i = 0; i < activeInduction.length; i++) {
            if (activeInduction[i] === "0<br>0<br>0") {
                html += `<td class="zeroValue">0*<br>0*<br>0*</td>`;
            } else {
                html += `<td>${activeInduction[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '</tbody>'
        html += '</table>'
        document.getElementById("active-house-table").innerHTML = html
    }

    // Pinnacles and Pitfalls
    function CicleYears(lifeTrajectory) {
        let initialYear = 36 - lifeTrajectory[1]
        let cycle1 = 0
        let cycle2 = initialYear + 1
        let cycle3 = cycle2 + 9
        let cycle4 = cycle3 + 9

        let cycleEnd1 = initialYear
        let cycleEnd2 = cycleEnd1 + 9
        let cycleEnd3 = cycleEnd2 + 9
        let cycleEnd4 = cycleEnd3 + 9

        let cycleYears = [cycle1, cycle2, cycle3, cycle4, cycleEnd1, cycleEnd2, cycleEnd3, cycleEnd4]

        return cycleYears
    }
    function Pinacles(day, month, year) {
        let dateValues = CalculateDateValues(day, month, year);
        let dayScore = SingleDigit(dateValues[0]);
        let monthScore = SingleDigit(dateValues[1]);
        let yearScore = SingleDigit(dateValues[2]);

        // Cálculo de los pináculos
        let cycle1 = dayScore + monthScore;
        let cycle2 = dayScore + yearScore;
        let cycle3 = cycle1 + cycle2;
        let cycle4 = monthScore + yearScore;

        // Aplicar validación para números maestros y reducción
        let pinacles = [
            FormatMasterNumber(cycle1),
            FormatMasterNumber(cycle2),
            FormatMasterNumber(cycle3),
            FormatMasterNumber(cycle4)
        ];

        return pinacles;
    }

    function Pitfalls(day, month, year) {
        let dateValues = CalculateDateValues(day, month, year)
        let dayScore = SingleDigit(dateValues[0])
        let monthScore = SingleDigit(dateValues[1])
        let yearScore = SingleDigit(dateValues[2])

        let cycle1 = SingleDigit(dayScore - monthScore)
        if (cycle1 < 0) {
            cycle1 = (cycle1 * -1)
        }

        let cycle2 = SingleDigit(dayScore - yearScore)
        if (cycle2 < 0) {
            cycle2 = (cycle2 * -1)
        }

        let cycle3 = SingleDigit(cycle1 - cycle2)
        if (cycle3 < 0) {
            cycle3 = (cycle3 * -1)
        }

        let cycle4 = SingleDigit(monthScore - yearScore)
        if (cycle4 < 0) {
            cycle4 = (cycle4 * -1)
        }

        let pitfalls = [cycle1, cycle2, cycle3, cycle4]

        return pitfalls
    }
    //Pinnacles and Pitfalls Table
    function PinnaclesPitfallsTable(cycleYear, pinacles, pitfalls) {
        let html = '<table class="table table-striped tableTextSize">'
        html += '<thead>'
        html += '<tr>'
        html += '<th></th>'
        html += `<th>${t.tables.pinnaclesTable.firstCycle}</th>`
        html += `<th>${t.tables.pinnaclesTable.secondCycle}</th>`
        html += `<th>${t.tables.pinnaclesTable.thirdCycle}</th>`
        html += `<th>${t.tables.pinnaclesTable.fourthCycle}</th>`
        html += '</tr>'
        html += '</thead>'

        html += '<tbody>'
        html += '<tr>'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.pinnaclesTable.years}</th>`
        html += '<td>' + cycleYear[0] + '-' + (ValidateMasterNumber(cycleYear[4])
            ? ('<span class="sameDigit">' + cycleYear[4] + '</span>')
            : cycleYear[4]) + '</td>'
        html += '<td>' + (ValidateMasterNumber(cycleYear[1])
            ? ('<span class="sameDigit">' + cycleYear[1] + '</span>')
            : cycleYear[1]) + '-' + (ValidateMasterNumber(cycleYear[5])
                ? ('<span class="sameDigit">' + cycleYear[5] + '</span>')
                : cycleYear[5]) + '</td>'
        html += '<td>' + (ValidateMasterNumber(cycleYear[2])
            ? ('<span class="sameDigit">' + cycleYear[2] + '</span>')
            : cycleYear[2]) + '-' + (ValidateMasterNumber(cycleYear[6])
                ? ('<span class="sameDigit">' + cycleYear[6] + '</span>')
                : cycleYear[6]) + '</td>'
        html += '<td>' + (ValidateMasterNumber(cycleYear[3])
            ? ('<span class="sameDigit">' + cycleYear[3] + '</span>')
            : cycleYear[3]) + '-' +
            (ValidateMasterNumber(cycleYear[7])
                ? ('<span class="sameDigit">' + cycleYear[7] + '</span>')
                : cycleYear[7]) + '</td>'
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.pinnaclesTable.pinnacles}</th>`
        for (let i = 0; i < pinacles.length; i++) {
            if (pinacles[i] == 0) {
                html += '<td class="zeroValue">' + "0*" + '</td>';
            } else {
                html += `<td>${pinacles[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '<tr>'
        html += `<th class="thPpal tableTitles2" scope="row">${t.tables.pinnaclesTable.pitfalls}</th>`
        for (let i = 0; i < pitfalls.length; i++) {
            if (pitfalls[i] == 0) {
                html += '<td class="zeroValue">' + "0*" + '</td>';
            } else {
                html += `<td class="redText">${pitfalls[i]}</td>`;
            }
        }
        html += '</tr>'

        html += '</tbody>'
        html += '</table>'
        document.getElementById("pinnacles-pitfalls-table").innerHTML = html
    }

    // Family Heritage //
    // HPP
    function GetHPP(inclution) {
        let noReduced = 0

        for (let i = 0; i < 4; i++) {
            noReduced = noReduced + inclution[i]
        }

        let reduced = SingleDigit(noReduced)
        let hpp = [noReduced, reduced]

        return hpp
    }
    // NCS
    function GetNCS(inclution) {
        let noReduced = 0

        for (let i = 5; i < 9; i++) {
            noReduced = noReduced + inclution[i]
        }

        let reduced = SingleDigit(noReduced)
        let ncs = [noReduced, reduced]

        return ncs
    }
    // DM
    function GetDM(hpp, ncs) {
        let noReduced = hpp[0] + ncs[0]
        let reduced = SingleDigit(noReduced)
        let dm = [noReduced, reduced]

        return dm
    }
    // EJE
    function GetEJE(inclution) {
        let noReduced = inclution[4]

        let reduced = SingleDigit(noReduced)
        let eje = [noReduced, reduced]

        return eje
    }
    // MF
    function GetMF(fullName, hpp) {
        let noReduced = fullName.length + hpp[0]
        let reduced = SingleDigit(noReduced)
        let mf = [noReduced, reduced]

        return mf
    }
    // MS
    function GetMS(fullName, ncs) {
        let noReduced = fullName.length + ncs[0]
        let reduced = SingleDigit(noReduced)
        let ms = [noReduced, reduced]

        return ms
    }
    // MFE
    function GetMFE(mf, ms) {
        let noReduced = mf[0] + ms[0]
        let reduced = SingleDigit(noReduced)
        let mfe = [noReduced, reduced]

        return mfe
    }
    // CosmicMission
    function CosmicMission(wayOfLife, destinationNumber) {
        let noReduced = wayOfLife[0] + destinationNumber[0]
        let reduced = SingleDigit(noReduced)
        let cosmicMission = [noReduced, reduced]

        return cosmicMission
    }
    // Family Heritage Table
    function FamilyHeritageTable(hpp, ncs, dm, eje, mf, ms, mfe) {
        let html = '<table class="table table-striped tableTextSize">'
        html += '<thead>'
        html += '<tr>'
        html += `<th class="tableTitles2">${t.tables.familyHeritage.title}</th>`
        html += `<th>${t.tables.familyHeritage.columns[0]}</th>`
        html += `<th>${t.tables.familyHeritage.columns[1]}</th>`
        html += '</tr>'
        html += '</thead>'

        html += '<tbody>'
        html += '<tr>'
        html += `<th class="tableTitles2 thPpal" scope="row">${t.tables.familyHeritage.hpp}</th>`
        if (ValidateMasterNumber(hpp[0])) {
            html += '<td>' + '<span class="sameDigit">' + hpp[0] + '</span>' + '</td>'
        } else {
            html += '<td>' + (hpp[0] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : hpp[0]) + '</td>'
        }
        if (ValidateMasterNumber(hpp[1])) {
            html += '<td>' + '<span class="sameDigit">' + hpp[1] + '</span>' + '</td>'
        } else {
            html += '<td>' + (hpp[1] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : hpp[1]) + '</td>'
        }
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="tableTitles2 thPpal" scope="row">${t.tables.familyHeritage.ncs}</th>`
        if (ValidateMasterNumber(ncs[0])) {
            html += '<td>' + '<span class="sameDigit">' + ncs[0] + '</span>' + '</td>'
        } else {
            html += '<td>' + (ncs[0] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : ncs[0]) + '</td>'
        }
        if (ValidateMasterNumber(ncs[1])) {
            html += '<td>' + '<span class="sameDigit">' + ncs[1] + '</span>' + '</td>'
        } else {
            html += '<td>' + (ncs[1] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : ncs[1]) + '</td>'
        }
        html += '</tr>'

        html += '<tr>'
        html += `<th class="tableTitles2 thPpal" scope="row">${t.tables.familyHeritage.dm}</th>`
        if (ValidateMasterNumber(dm[0])) {
            html += '<td>' + '<span class="sameDigit">' + dm[0] + '</span>' + '</td>'
        } else {
            html += '<td>' + (dm[0] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : dm[0]) + '</td>'
        }
        if (ValidateMasterNumber(dm[1])) {
            html += '<td>' + '<span class="sameDigit">' + dm[1] + '</span>' + '</td>'
        } else {
            html += '<td>' + (dm[1] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : dm[1]) + '</td>'
        }
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="tableTitles2 thPpal" scope="row">${t.tables.familyHeritage.eje}</th>`
        if (ValidateMasterNumber(eje[0])) {
            html += '<td>' + '<span class="sameDigit">' + eje[0] + '</span>' + '</td>'
        } else {
            html += '<td>' + (eje[0] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : eje[0]) + '</td>'
        }
        if (ValidateMasterNumber(eje[1])) {
            html += '<td>' + '<span class="sameDigit">' + eje[1] + '</span>' + '</td>'
        } else {
            html += '<td>' + (eje[1] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : eje[1]) + '</td>'
        }
        html += '</tr>'

        html += '<tr>'
        html += `<th class="tableTitles2 thPpal" scope="row">${t.tables.familyHeritage.mf}</th>`
        if (ValidateMasterNumber(mf[0])) {
            html += '<td>' + '<span class="sameDigit">' + mf[0] + '</span>' + '</td>'
        } else {
            html += '<td>' + (mf[0] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : mf[0]) + '</td>'
        }
        if (ValidateMasterNumber(mf[1])) {
            html += '<td>' + '<span class="sameDigit">' + mf[1] + '</span>' + '</td>'
        } else {
            html += '<td>' + (mf[1] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : mf[1]) + '</td>'
        }
        html += '</tr>'

        html += '<tr class="trPpal">'
        html += `<th class="tableTitles2 thPpal" scope="row">${t.tables.familyHeritage.ms}</th>`
        if (ValidateMasterNumber(ms[0])) {
            html += '<td>' + '<span class="sameDigit">' + ms[0] + '</span>' + '</td>'
        } else {
            html += '<td>' + (ms[0] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : ms[0]) + '</td>'
        }
        if (ValidateMasterNumber(ms[1])) {
            html += '<td>' + '<span class="sameDigit">' + ms[1] + '</span>' + '</td>'
        } else {
            html += '<td>' + (ms[1] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : ms[1]) + '</td>'
        }
        html += '</tr>'

        html += '<tr>'
        html += `<th class="tableTitles2 thPpal" scope="row">${t.tables.familyHeritage.mfe}</th>`
        if (ValidateMasterNumber(mfe[0])) {
            html += '<td>' + '<span class="sameDigit">' + mfe[0] + '</span>' + '</td>'
        } else {
            html += '<td>' + (mfe[0] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : mfe[0]) + '</td>'
        }
        if (ValidateMasterNumber(mfe[1])) {
            html += '<td>' + '<span class="sameDigit">' + mfe[1] + '</span>' + '</td>'
        } else {
            html += '<td>' + (mfe[1] == 0 ? ('<span class="zeroValue">' + "0*" + '</span>') : mfe[1]) + '</td>'
        }
        html += '</tr>'

        html += '</tbody>'
        html += '</table>'
        document.getElementById("family-heritage-table").innerHTML = html
    }
    // Cycles Life Table
    function CyclesLifeTable(year, inclution, wayOfLife) {
        let wayOfLifeNumber = 0

        if (wayOfLife.length > 2) {
            wayOfLifeNumber = wayOfLife[2]
        } else {
            wayOfLifeNumber = wayOfLife[1]
        }

        // Population
        let html = '<table class="table table-striped tableTextSize">'
        html += '<tr>'
        html += `<th colspan="2" class="tableTitles2">${t.tables.cyclesLife.habitants}</th>`
        for (let i = 0; i < 10; i++) {
            if (i == 9) {
                (inclution[0] == 0 ? (html += '<th class="zeroValue">' + "0*" + '</th>')
                    : (html += '<th class="blackTextR">' + inclution[0] + '</th>'))
            } else {
                (inclution[i] == 0 ? (html += '<th class="zeroValue">' + "0*" + '</th>')
                    : (html += '<th class="blackTextR">' + inclution[i] + '</th>'))
            }
        }
        html += '</tr>'
        // Cycles
        html += '<tr>'
        html += `<th colspan="2" class="tableTitles2">${t.tables.cyclesLife.cycles}</th>`
        for (let i = 0; i < 10; i++) {
            let cycle = i + 1
            html += '<th class="td-w blackTextR">' + cycle + '</th>'
        }
        html += '</tr>'

        // Years
        html += '<tbody>'
        html += '<tr class="trPpal">'
        html += `<th scope="row">${t.tables.cyclesLife.hab}</th>`
        html += `<th scope="row">${t.tables.cyclesLife.ap}</th>`
        html += '</tr>'

        let newInclution = []
        let cycles = []
        let yearNumberValidation = 0

        if (wayOfLifeNumber > 9) {
            wayOfLifeNumber = SingleDigit(wayOfLifeNumber)
        }

        if (wayOfLifeNumber == 1) {
            newInclution = inclution
            cycles = [1, 2, 3, 4, 5, 6, 7, 8, 9]
            yearNumberValidation = 0
        } else if (wayOfLifeNumber == 2) {
            newInclution = [inclution[1], inclution[2], inclution[3], inclution[4], inclution[5], inclution[6], inclution[7], inclution[8], inclution[0]]
            cycles = [2, 3, 4, 5, 6, 7, 8, 9, 1]
            yearNumberValidation = 8
        } else if (wayOfLifeNumber == 3) {
            newInclution = [inclution[2], inclution[3], inclution[4], inclution[5], inclution[6], inclution[7], inclution[8], inclution[0], inclution[1]]
            cycles = [3, 4, 5, 6, 7, 8, 9, 1, 2]
            yearNumberValidation = 7
        } else if (wayOfLifeNumber == 4) {
            newInclution = [inclution[3], inclution[4], inclution[5], inclution[6], inclution[7], inclution[8], inclution[0], inclution[1], inclution[2]]
            cycles = [4, 5, 6, 7, 8, 9, 1, 2, 3]
            yearNumberValidation = 6
        } else if (wayOfLifeNumber == 5) {
            newInclution = [inclution[4], inclution[5], inclution[6], inclution[7], inclution[8], inclution[0], inclution[1], inclution[2], inclution[3]]
            cycles = [5, 6, 7, 8, 9, 1, 2, 3, 4]
            yearNumberValidation = 5
        } else if (wayOfLifeNumber == 6) {
            newInclution = [inclution[5], inclution[6], inclution[7], inclution[8], inclution[0], inclution[1], inclution[2], inclution[3], inclution[4]]
            cycles = [6, 7, 8, 9, 1, 2, 3, 4, 5]
            yearNumberValidation = 4
        } else if (wayOfLifeNumber == 7) {
            newInclution = [inclution[6], inclution[7], inclution[8], inclution[0], inclution[1], inclution[2], inclution[3], inclution[4], inclution[5]]
            cycles = [7, 8, 9, 1, 2, 3, 4, 5, 6]
            yearNumberValidation = 3
        } else if (wayOfLifeNumber == 8) {
            newInclution = [inclution[7], inclution[8], inclution[0], inclution[1], inclution[2], inclution[3], inclution[4], inclution[5], inclution[6]]
            cycles = [8, 9, 1, 2, 3, 4, 5, 6, 7]
            yearNumberValidation = 2
        } else if (wayOfLifeNumber == 9) {
            newInclution = [inclution[8], inclution[0], inclution[1], inclution[2], inclution[3], inclution[4], inclution[5], inclution[6], inclution[7]]
            cycles = [9, 1, 2, 3, 4, 5, 6, 7, 8]
            yearNumberValidation = 1
        }

        let date = new Date().getFullYear();
        let currentYear = year
        let countYear = 0
        let newCountYear = 0
        for (let i = 0; i < 9; i++) {
            html += '<tr>'

            if (newInclution[i] == 0) {
                html += '<th class="zeroValue" scope="row">' + "0*" + '</th>'
            } else {
                html += '<th class="blackText" scope="row">' + newInclution[i] + '</th>'
            }

            if (cycles[i] == 0) {
                html += '<th class="zeroValue" scope="row">' + "0*" + '</th>'
            } else {
                html += '<th class="blackText" scope="row">' + cycles[i] + '</th>'
            }

            for (let j = 0; j < 10; j++) {
                if (year === date) {
                    html += '<td class="currentYear"><span id="currentAge">' + newCountYear + '</span>' + year + '</td>'
                } else {
                    html += '<td><span id="currentAge">' + newCountYear + '</span>' + year + '</td>'
                }
                year += 9
                newCountYear += 9
            }
            currentYear++
            year = currentYear

            countYear++
            newCountYear = countYear
        }
        html += '</tr>'
        html += '</tbody>'
        html += '</table>'

        document.getElementById("cyclesLife-table").innerHTML = html
    }

    // Tabla de fecha de nacimiento
    function GenerateBirthdateTable(day, month, year) {
        let html = `
            <table class="table table-bordered tableTextSize">
                <thead>
                    <tr>
                        <th class="tableTitles2">${t.tables.birthdate.element}</th>
                        <th>Valor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="tableTitles2">${t.tables.birthdate.day}</td>
                        <td>${day}</td>
                    </tr>
                    <tr>
                        <td class="tableTitles2">${t.tables.birthdate.month}</td>
                        <td>${month}</td>
                    </tr>
                    <tr>
                        <td class="tableTitles2">${t.tables.birthdate.year}</td>
                        <td>${year}</td>
                    </tr>
                </tbody>
            </table>
        `;
        document.getElementById("birthdate-table").innerHTML = html;
    }

    // Tabla de Año y Mes Personal con corrección de número maestro
    function GeneratePersonalYearMonthTable(personalYear, personalMonth) {
        let personalYearStr = String(personalYear);
        let personalMonthStr = String(personalMonth);

        let html = `
            <table class="table table-bordered tableTextSize">
                <thead>
                    <tr>
                        <th class="tableTitles2">${t.tables.birthdate.element}</th>
                        <th>Valor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="tableTitles2">${t.tables.yearMonth.personalYear}</td>
                        <td class="${personalYearStr.includes('/') ? 'greenText' : ''}">${personalYearStr}</td>
                    </tr>
                    <tr>
                        <td class="tableTitles2">${t.tables.yearMonth.personalMonth}</td>
                        <td class="${personalMonthStr.includes('/') ? 'greenText' : ''}">${personalMonthStr}</td>
                    </tr>
                </tbody>
            </table>
        `;
        document.getElementById("personal-year-month-table").innerHTML = html;
    }

    // UTILS //
    // Calculate Date Values - Day, Month, Year
    function CalculateDateValues(day, month, year) {
        let dayScore = 0
        let monthScore = 0
        let yearScore = 0

        if (day >= 10) {
            for (let i = 0; i < day.length; i++) {
                let curValue = day.toString().charAt(i)
                dayScore = dayScore + parseInt(curValue)
            }
        } else {
            dayScore = parseInt(day)
        }

        if (month >= 10) {
            for (let i = 0; i < month.length; i++) {
                let curValue = month.toString().charAt(i)
                monthScore = monthScore + parseInt(curValue)
            }
        } else {
            monthScore = parseInt(month)
        }

        for (let i = 0; i < year.length; i++) {
            let curValue = year.toString().charAt(i)
            yearScore = yearScore + parseInt(curValue)
        }

        let dateValues = [dayScore, monthScore, yearScore]

        return dateValues
    }

    // Calcular el Año Personal
    function SingleDigitWithMaster(value) {
        let masterNumber = null;
        while (value >= 10) {
            if (ValidateMasterNumber(value)) {
                masterNumber = value;
            }
            let total = 0;
            let str = '' + value;

            for (let i = 0; i < str.length; i++) {
                total += parseInt(str.charAt(i));
            }
            value = total;
        }

        return masterNumber ? `${masterNumber}/${value}` : value;
    }

    // Calcular el Año Personal
    function CalculatePersonalYear(day, month) {
        const currentYear = new Date().getFullYear();
        const sum = day + month + currentYear;
        return SingleDigitWithMaster(sum);
    }

    // Calcular el Mes Personal
    function CalculatePersonalMonth(personalYear) {
        const currentMonth = new Date().getMonth() + 1;
        const sum = parseInt(personalYear) + currentMonth;
        return SingleDigitWithMaster(sum);
    }

    // Single Digit
    function SingleDigit(singleDigitValue) {
        while (singleDigitValue >= 10) {
            let total = 0
            let str = '' + singleDigitValue

            for (let i = 0; i < str.length; i++) {
                total = total + parseInt(str.charAt(i))
            }
            singleDigitValue = total
        }

        return singleDigitValue
    }
    // Name Single Digit
    function NameSingleDigit(singleDigitValue) {
        let reducedValues = []
        while (singleDigitValue >= 10) {
            let total = 0
            let str = '' + singleDigitValue

            for (let i = 0; i < str.length; i++) {
                total = total + parseInt(str.charAt(i))
            }
            singleDigitValue = total
            reducedValues.push(total)
        }

        return reducedValues
    }
    // Validate master number
    function ValidateMasterNumber(num) {
        if (num.toString().length === 2) {
            return [11, 22, 33, 44, 55, 66, 77, 88, 99].includes(num);
        } else {
            return false;
        }
    }

    function FormatMasterNumber(number) {
        if (ValidateMasterNumber(number)) {
            let reduced = SingleDigit(number);
            return `${number}/${reduced}`;
        } else {
            return SingleDigit(number);
        }
    }
</script>